<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>XML Demo of Weather</title>
	<link rel="shortcut icon" href="/faveicon.ico" mce_href="/faveicon.ico"/>
<script language="javascript">
var key = "2592d43307a587fb69f1d0be5fc5c3e2";
//https://api.openweathermap.org/data/2.5/weather?id=4614720&mode=xml&units=imperial&appid=2592d43307a587fb69f1d0be5fc5c3e2
var url1 = "https://api.openweathermap.org/data/2.5/weather?";
var url2 = "id=4614720&mode=xml&units=imperial&appid=";
var url = url1 + url2 + key;
var xmlhttp = new XMLHttpRequest();

var windd = new Array();
    windd[0]="East";
    windd[1]="North-East";
    windd[2]="North";
    windd[3]="North-West";
    windd[4]="West";
    windd[5]="South-West";
    windd[6]="South";
    windd[7]="South-East";

xmlhttp.onreadystatechange = function() {
    if (xmlhttp.readyState == 4 && xmlhttp.status == 200) {
		myFunction(xmlhttp);
		}
};

xmlhttp.open("GET", url, true);
xmlhttp.send();
function myFunction(xml) {
  var xmlDoc, x0, x1;
  xmlDoc = xml.responseXML;
  x0 = xmlDoc.getElementsByTagName('temperature');
  document.getElementById("temp").innerHTML = x0[0].getAttribute("value");
  x1 = xmlDoc.getElementsByTagName("clouds");
  document.getElementById("skycondition").innerHTML = x1[0].getAttribute("name");
  x2 = xmlDoc.getElementsByTagName("speed");
  document.getElementById("windspeed").innerHTML = x2[0].getAttribute("value");
  x3 = xmlDoc.getElementsByTagName("direction");
  document.getElementById("winddir").innerHTML = windd[~~((parseInt(x3[0].getAttribute("value"))+23)/45)];
}

window.onload=myFunction;
</script>
</head>
<body>
<p><a href="/projects/bcarpenter/Homework/HW15">Main Page</a></p>
<table border="5">
  <tr>
    <td colspan="2">Temperature:</td><td><a id="temp"></a>Â°F</td>
  </tr>
  <tr>
    <td colspan="3">The sky has <a id="skycondition"></a></td>
  </tr>
  <tr>
    <td colspan="3">Wind is <a id="windspeed"></a> mph from the <a id="winddir"></a></a></td>
  </tr>
</table>
<p><a href="/projects/bcarpenter/Homework/HW15">Main Page</a></p>
</body></html>
